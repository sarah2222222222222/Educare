<html lang="en">
 <head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Create and Assign Assessment with Generate Button</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Inter", sans-serif;
      background-color: #f3f4f6;
    }
    textarea::-webkit-scrollbar {
      width: 8px;
    }
    textarea::-webkit-scrollbar-thumb {
      background-color: #3b82f6;
      border-radius: 4px;
    }
    input[type="file"]::-webkit-file-upload-button {
      cursor: pointer;
      background-color: #bfdbfe;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      color: #1e40af;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    input[type="file"]::-webkit-file-upload-button:hover {
      background-color: #3b82f6;
      color: white;
    }
        /* Floating larger AI companion */
        @keyframes float {
            0% {
                transform: translatey(0px);
            }
            50% {
                transform: translatey(-10px);
            }
            100% {
                transform: translatey(0px);
            }
        }
        .floating {
            animation: float 2s ease-in-out infinite;
        }

        .fade-in {
            animation: fadeIn 6s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .slide-in {
            animation: slideIn 1s ease-in-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }
  </style>
 </head>
 <body class="text-gray-900">
  <div class="flex min-h-screen">
   <!-- Left Sidebar -->
   <nav class="flex flex-row md:flex-col space-x-6 md:space-x-0 md:space-y-6 bg-white rounded-xl p-4 md:p-6 w-full md:w-48 shadow-[0_0_10px_#f0f2f5] min-h-[auto] md:min-h-[400px] overflow-x-auto md:overflow-visible">
    <img alt="Chatbot logo with letters CB in blue and white background" class="w- h-12 rounded-lg shadow-md" height="48" src="../assets/Images/ChatGPT Image Apr 12, 2025, 07_43_14 PM.png" width="48"/>
    <a href="../Pages/index.html" class="flex items-center space-x-2 text-[#0d8cf0] font-semibold text-sm hover:text-[#0b7cd9] transition-colors duration-200 whitespace-nowrap">
     <i class="fas fa-list-ul text-lg">
     </i>
     <span>
      Home
     </span>
    </a> 
   <a href="../Pages/dash.html" class="flex items-center space-x-3 text-xs text-black font-normal hover:text-[#0d8cf0] hover:font-semibold transition-colors duration-200 whitespace-nowrap">
     <img alt="Icon of a clipboard representing classrooms" class="w-5 h-5" height="20" src="../assets/Images/live-streaming.png" width="20"/>
     <span>
      classrooms
     </span>
    </a>
    <a href="../Pages/favorites.html" class="flex items-center space-x-3 text-xs text-black font-normal hover:text-[#0d8cf0] hover:font-semibold transition-colors duration-200 whitespace-nowrap">
     <img alt="Icon of a yellow star representing favorites" class="w-5 h-5" height="20" src="../assets/Images/star.png" width="20"/>
     <span>
      favorites
     </span>
    </a>
    <a href="../Pages/archived.html" class="flex items-center space-x-3 text-xs text-black font-normal hover:text-[#0d8cf0] hover:font-semibold transition-colors duration-200 whitespace-nowrap">
     <img alt="Icon of a school building representing archived classes" class="w-5 h-5" height="20" src="../assets/Images/archive.png" width="20"/>
     <span>
      archived classes
     </span>
    </a>
    <a href="./store.html" class="flex items-center space-x-3 text-xs text-black font-normal hover:text-[#0d8cf0] hover:font-semibold transition-colors duration-200 whitespace-nowrap">
     <img alt="Icon of an app store symbol representing store" class="w-5 h-5" height="20" src="../assets/Images/app-store.png" width="20"/>
     <span>
      store
     </span>
    </a>
    <a href="./settings.html" class="flex items-center space-x-3 text-xs text-black font-normal hover:text-[#0d8cf0] hover:font-semibold transition-colors duration-200 whitespace-nowrap">
     <img alt="Icon of a gear representing settings" class="w-5 h-5" height="20" src="../assets/Images/settings.png" width="20"/>
     <span>
      settings
     </span>
    </a> 
   </nav>
   </aside>
   <!-- Main content -->
   <main class="flex-1 p-10 max-w-5xl mx-auto">
    <!-- Navigation Tabs -->
    <nav
    class="flex items-center justify-center gap-8 bg-white border border-gray-200 rounded-full py-2 px-6 shadow-sm mb-10">
    <a
      class="text-gray-500 text-sm hover:text-sky-600 cursor-pointer"
      href="./stream.html"
      id="tabStream"
      >Stream</a
    >
    <a
    class="text-sky-600 font-semibold text-sm hover:underline cursor-pointer"
      href="./classwork.html"
      id="tabClasswork"
      >Classwork</a
    >
    <a
      class="text-gray-500 text-sm hover:text-sky-600 cursor-pointer"
      href="./people.html"
      >People</a
    >
    <a
      class="text-gray-500 text-sm hover:text-sky-600 cursor-pointer"
      href="./Messages.html"
      >Messages</a
    >
    <a
      class="text-gray-500 text-sm hover:text-sky-600 cursor-pointer"
      href="./calendar.html"
      id="tabCalendar"
      >Calendar</a
    >
    <button
      aria-label="Settings"
      class="ml-4 text-sky-600 hover:text-sky-800 cursor-pointer"
      title="Settings">
      <i class="fas fa-cog text-lg"></i>
    </button>
  </nav>
   <!-- Floating Avatar bottom right -->
   <div class="fixed bottom-4 right-4 floating">
     <a href="./chatbot.html" onclick="openModal()">
      <img alt="AI icon" class="w-20 h-20 rounded-full" src="../assets/Images/WhatsApp Image 2024-11-15 at 19.39.33_b2a01f1c.jpg"/>
     </a>
    </div>
    <section class="bg-white rounded-3xl shadow-xl p-10 max-w-4xl mx-auto">
     <div class="flex justify-between items-center mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Create and Assign Assessment</h1>
      <button
        id="generateAssessmentBtn"
        class="bg-indigo-600 text-white text-lg font-semibold rounded-xl px-6 py-3 hover:bg-indigo-700 transition shadow-md"
        type="button"
        aria-label="Navigate to Generate Assessment Page"
      >
       Generate Assessment
      </button>
     </div>
     <form id="assessmentForm" class="flex flex-col gap-8" novalidate>
      <div>
       <label for="assessmentTitle" class="text-lg font-semibold text-gray-800 mb-3 block">Assessment Title</label>
       <input
         type="text"
         id="assessmentTitle"
         name="assessmentTitle"
         placeholder="Enter assessment title"
         class="border border-gray-300 rounded-xl px-5 py-4 text-lg w-full focus:outline-none focus:ring-4 focus:ring-blue-500 transition"
         required
       />
      </div>

      <div>
       <label for="assessmentTopic" class="text-lg font-semibold text-gray-800 mb-3 block">Topic</label>
       <input
         type="text"
         id="assessmentTopic"
         name="assessmentTopic"
         placeholder="Enter topic or subject"
         class="border border-gray-300 rounded-xl px-5 py-4 text-lg w-full focus:outline-none focus:ring-4 focus:ring-blue-500 transition"
         required
       />
      </div>

      <div id="questionsContainer" class="space-y-8">
       <!-- Questions will be added here -->
      </div>

      <button
        type="button"
        id="addQuestionBtn"
        class="bg-blue-600 text-white text-lg font-semibold rounded-xl px-6 py-3 hover:bg-blue-700 transition shadow-md w-full max-w-xs mx-auto"
      >
       + Add Question
      </button>

      <div>
       <label
         for="studentsSelect"
         class="text-lg font-semibold text-gray-800 mb-3 block"
         >Assign To Students</label
       >
       <select
         id="studentsSelect"
         name="studentsSelect"
         multiple
         size="5"
         class="border border-gray-300 rounded-xl px-5 py-4 text-lg w-full focus:outline-none focus:ring-4 focus:ring-blue-500 transition"
         required
       >
        <!-- Example student options -->
        <option value="student1">Student One</option>
        <option value="student2">Student Two</option>
        <option value="student3">Student Three</option>
        <option value="student4">Student Four</option>
        <option value="student5">Student Five</option>
       </select>
       <p class="text-sm text-gray-500 mt-1">
        Hold Ctrl (Cmd on Mac) to select multiple students.
       </p>
      </div>

      <div class="flex justify-end gap-6 mt-8">
       <button
         type="reset"
         class="text-blue-600 text-lg font-semibold hover:underline focus:outline-none"
       >
        Clear All
       </button>
       <button
         type="submit"
         class="bg-green-600 text-white text-lg font-semibold rounded-xl px-8 py-3 hover:bg-green-700 transition shadow-lg"
       >
        Assign Assessment
       </button>
      </div>
     </form>
    </section>

    <section class="bg-white rounded-3xl shadow-xl p-10 max-w-4xl mx-auto mt-16">
     <h1 class="text-3xl font-bold mb-8 text-gray-900">Assigned Assessments</h1>
     <div
       id="assignedList"
       class="divide-y divide-gray-300 border border-gray-300 rounded-2xl"
     >
      <!-- Assigned assessments will appear here -->
     </div>
    </section>
   </main>
  </div>

  <template id="questionTemplate">
   <div class="border border-gray-300 rounded-xl p-6 relative bg-gray-50">
    <button type="button" class="absolute top-3 right-3 text-red-500 hover:text-red-700 focus:outline-none remove-question-btn" aria-label="Remove question">
     <i class="fas fa-times"></i>
    </button>
    <label class="text-lg font-semibold text-gray-800 mb-3 block">Question</label>
    <textarea
      name="questionText"
      rows="3"
      placeholder="Enter question text"
      class="border border-gray-300 rounded-lg px-4 py-3 text-base w-full focus:outline-none focus:ring-4 focus:ring-blue-500 resize-y"
      required
    ></textarea>

    <label class="text-md font-semibold text-gray-700 mt-6 mb-2 block">Question Type</label>
    <select name="questionType" class="border border-gray-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-4 focus:ring-blue-500" required>
     <option value="multiple-choice">Multiple Choice</option>
     <option value="short-answer">Short Answer</option>
     <option value="true-false">True / False</option>
    </select>

    <div class="mt-4 options-container hidden">
     <label class="text-md font-semibold text-gray-700 mb-2 block">Options</label>
     <div class="space-y-3">
      <!-- Options inputs here -->
     </div>
     <button type="button" class="mt-3 text-blue-600 hover:underline add-option-btn">+ Add Option</button>
    </div>
   </div>
  </template>

  <template id="optionTemplate">
   <div class="flex items-center gap-3">
    <input
      type="text"
      name="optionText"
      placeholder="Option text"
      class="border border-gray-300 rounded-lg px-3 py-2 flex-1 focus:outline-none focus:ring-4 focus:ring-blue-500"
      required
    />
    <button type="button" class="text-red-500 hover:text-red-700 remove-option-btn" aria-label="Remove option">
     <i class="fas fa-times"></i>
    </button>
   </div>
  </template>

  <script>
   const assessmentForm = document.getElementById("assessmentForm");
    const questionsContainer = document.getElementById("questionsContainer");
    const addQuestionBtn = document.getElementById("addQuestionBtn");
    const questionTemplate = document.getElementById("questionTemplate");
    const optionTemplate = document.getElementById("optionTemplate");
    const assignedList = document.getElementById("assignedList");
    const generateAssessmentBtn = document.getElementById("generateAssessmentBtn");

    // Navigate to generate assessment page
    generateAssessmentBtn.addEventListener("click", () => {
      window.location.href = "generate-assignment.html";
    });

    // Add a new question block
    function addQuestion() {
      const questionClone = questionTemplate.content.cloneNode(true);
      const questionDiv = questionClone.querySelector("div");

      // Show/hide options container based on question type
      const questionTypeSelect = questionDiv.querySelector("select[name='questionType']");
      const optionsContainer = questionDiv.querySelector(".options-container");
      const optionsList = optionsContainer.querySelector("div.space-y-3");
      const addOptionBtn = questionDiv.querySelector(".add-option-btn");

      function updateOptionsVisibility() {
        if (questionTypeSelect.value === "multiple-choice") {
          optionsContainer.classList.remove("hidden");
          if (optionsList.children.length === 0) {
            addOption(); // Add initial option
            addOption(); // Add second option
          }
        } else {
          optionsContainer.classList.add("hidden");
          optionsList.innerHTML = "";
        }
      }

      questionTypeSelect.addEventListener("change", updateOptionsVisibility);

      // Add option function
      function addOption() {
        const optionClone = optionTemplate.content.cloneNode(true);
        const optionDiv = optionClone.querySelector("div");
        const removeBtn = optionDiv.querySelector(".remove-option-btn");
        removeBtn.addEventListener("click", () => {
          optionDiv.remove();
        });
        optionsList.appendChild(optionDiv);
      }

      addOptionBtn.addEventListener("click", addOption);

      // Remove question button
      const removeQuestionBtn = questionDiv.querySelector(".remove-question-btn");
      removeQuestionBtn.addEventListener("click", () => {
        questionDiv.remove();
      });

      // Initialize options visibility
      updateOptionsVisibility();

      questionsContainer.appendChild(questionDiv);
    }

    addQuestionBtn.addEventListener("click", () => {
      addQuestion();
    });

    // Add initial question on load
    window.addEventListener("DOMContentLoaded", () => {
      addQuestion();
      loadAssignedAssessments();
    });

    // Handle form submission
    assessmentForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const title = assessmentForm.assessmentTitle.value.trim();
      const topic = assessmentForm.assessmentTopic.value.trim();

      if (!title || !topic) {
        alert("Please fill in the assessment title and topic.");
        return;
      }

      const questions = [];
      const questionDivs = questionsContainer.querySelectorAll("div.border");

      if (questionDivs.length === 0) {
        alert("Please add at least one question.");
        return;
      }

      for (const qDiv of questionDivs) {
        const questionText = qDiv.querySelector("textarea[name='questionText']").value.trim();
        const questionType = qDiv.querySelector("select[name='questionType']").value;

        if (!questionText) {
          alert("Please fill in all question texts.");
          return;
        }

        const questionData = {
          text: questionText,
          type: questionType,
        };

        if (questionType === "multiple-choice") {
          const options = [];
          const optionInputs = qDiv.querySelectorAll("input[name='optionText']");
          for (const optInput of optionInputs) {
            const optText = optInput.value.trim();
            if (!optText) {
              alert("Please fill in all option texts.");
              return;
            }
            options.push(optText);
          }
          if (options.length < 2) {
            alert("Multiple choice questions require at least two options.");
            return;
          }
          questionData.options = options;
        }

        questions.push(questionData);
      }

      // Get selected students
      const selectedStudentsOptions = Array.from(
        assessmentForm.studentsSelect.selectedOptions
      );
      if (selectedStudentsOptions.length === 0) {
        alert("Please select at least one student to assign.");
        return;
      }
      const students = selectedStudentsOptions.map((opt) => ({
        id: opt.value,
        name: opt.text,
      }));

      // Create assessment object
      const assessment = {
        id: "id-" + Math.random().toString(36).substr(2, 9),
        title,
        topic,
        questions,
        students,
      };

      // Save to localStorage (simulate backend)
      const assignedAssessments =
        JSON.parse(localStorage.getItem("assignedAssessments")) || [];
      assignedAssessments.push(assessment);
      localStorage.setItem("assignedAssessments", JSON.stringify(assignedAssessments));

      alert("Assessment assigned successfully to selected students.");
      assessmentForm.reset();
      questionsContainer.innerHTML = "";
      addQuestion();
      loadAssignedAssessments();
    });

    // Load assigned assessments and display
    function loadAssignedAssessments() {
      const assignedAssessments =
        JSON.parse(localStorage.getItem("assignedAssessments")) || [];
      assignedList.innerHTML = "";
      if (assignedAssessments.length === 0) {
        assignedList.innerHTML =
          '<p class="p-8 text-lg text-gray-500 text-center">No assigned assessments yet.</p>';
        return;
      }
      assignedAssessments.forEach((assessment) => {
        const div = document.createElement("div");
        div.className =
          "border border-gray-300 rounded-xl p-6 mb-6 bg-white shadow-sm relative";
        div.innerHTML = `
          <h2 class="text-xl font-semibold mb-2 text-gray-900">${assessment.title}</h2>
          <p class="text-sm italic text-gray-600 mb-4">Topic: ${assessment.topic}</p>
          <p class="text-sm font-semibold mb-2">Assigned to: ${assessment.students
            .map((s) => s.name)
            .join(", ")}</p>
          <div class="space-y-4 mb-4">
            ${assessment.questions
              .map((q, i) => {
                let optionsHtml = "";
                if (q.type === "multiple-choice" && q.options) {
                  optionsHtml = `<ul class="list-disc list-inside text-gray-700 ml-4">${q.options
                    .map((opt) => `<li>${opt}</li>`)
                    .join("")}</ul>`;
                }
                return `
                  <div>
                    <p class="font-semibold text-gray-800">Q${i + 1}: ${q.text}</p>
                    <p class="italic text-gray-600">Type: ${q.type.replace(
                      "-",
                      " "
                    )}</p>
                    ${optionsHtml}
                  </div>
                `;
              })
              .join("")}
          </div>
          <div class="absolute top-4 right-4 flex gap-3">
            <button class="text-blue-600 hover:underline font-semibold edit-btn" data-id="${assessment.id}" aria-label="Edit assessment">Edit</button>
            <button class="text-red-600 hover:underline font-semibold delete-btn" data-id="${assessment.id}" aria-label="Delete assessment">Delete</button>
          </div>
        `;
        assignedList.appendChild(div);
      });
    }

    // Edit and Delete functionality
    assignedList.addEventListener("click", (e) => {
      const editBtn = e.target.closest(".edit-btn");
      const deleteBtn = e.target.closest(".delete-btn");

      if (editBtn) {
        const id = editBtn.getAttribute("data-id");
        editAssessment(id);
      } else if (deleteBtn) {
        const id = deleteBtn.getAttribute("data-id");
        deleteAssessment(id);
      }
    });

    // Edit assessment by loading data into form
    function editAssessment(id) {
      const assignedAssessments =
        JSON.parse(localStorage.getItem("assignedAssessments")) || [];
      const assessment = assignedAssessments.find((a) => a.id === id);
      if (!assessment) return;

      assessmentForm.assessmentTitle.value = assessment.title;
      assessmentForm.assessmentTopic.value = assessment.topic;
      assessmentForm.studentsSelect.value = null;
      // Select assigned students
      Array.from(assessmentForm.studentsSelect.options).forEach((opt) => {
        opt.selected = assessment.students.some((s) => s.id === opt.value);
      });

      // Clear existing questions
      questionsContainer.innerHTML = "";

      // Load questions
      assessment.questions.forEach((q) => {
        addQuestion();
        const lastQuestion = questionsContainer.lastElementChild;
        lastQuestion.querySelector("textarea[name='questionText']").value = q.text;
        lastQuestion.querySelector("select[name='questionType']").value = q.type;

        const optionsContainer = lastQuestion.querySelector(".options-container");
        const optionsList = optionsContainer.querySelector("div.space-y-3");

        if (q.type === "multiple-choice") {
          optionsContainer.classList.remove("hidden");
          optionsList.innerHTML = "";
          q.options.forEach((optText) => {
            const optionClone = optionTemplate.content.cloneNode(true);
            const optionDiv = optionClone.querySelector("div");
            optionDiv.querySelector("input[name='optionText']").value = optText;
            const removeBtn = optionDiv.querySelector(".remove-option-btn");
            removeBtn.addEventListener("click", () => {
              optionDiv.remove();
            });
            optionsList.appendChild(optionDiv);
          });
        } else {
          optionsContainer.classList.add("hidden");
          optionsList.innerHTML = "";
        }
      });

      // Scroll to form
      window.scrollTo({ top: 0, behavior: "smooth" });

      // Remove old submit listener and add new one for update
      assessmentForm.removeEventListener("submit", submitHandler);
      assessmentForm.addEventListener("submit", updateHandler);

      // Store current editing id
      assessmentForm.dataset.editingId = id;

      // Change button text
      assessmentForm.querySelector("button[type=submit]").textContent = "Update Assessment";
    }

    // Submit handler for new assessment
    function submitHandler(e) {
      e.preventDefault();
      saveAssessment();
    }

    // Update handler for editing assessment
    function updateHandler(e) {
      e.preventDefault();
      updateAssessment();
    }

    // Save new assessment
    function saveAssessment() {
      const assessment = collectFormData();
      if (!assessment) return;

      const assignedAssessments =
        JSON.parse(localStorage.getItem("assignedAssessments")) || [];
      assignedAssessments.push(assessment);
      localStorage.setItem("assignedAssessments", JSON.stringify(assignedAssessments));

      alert("Assessment assigned successfully to selected students.");
      resetForm();
      loadAssignedAssessments();
    }

    // Update existing assessment
    function updateAssessment() {
      const id = assessmentForm.dataset.editingId;
      if (!id) return;

      const assessment = collectFormData();
      if (!assessment) return;

      assessment.id = id;

      const assignedAssessments =
        JSON.parse(localStorage.getItem("assignedAssessments")) || [];
      const index = assignedAssessments.findIndex((a) => a.id === id);
      if (index !== -1) {
        assignedAssessments[index] = assessment;
        localStorage.setItem("assignedAssessments", JSON.stringify(assignedAssessments));
        alert("Assessment updated successfully.");
        resetForm();
        loadAssignedAssessments();
      }
    }

    // Collect form data into assessment object
    function collectFormData() {
      const title = assessmentForm.assessmentTitle.value.trim();
      const topic = assessmentForm.assessmentTopic.value.trim();

      if (!title || !topic) {
        alert("Please fill in the assessment title and topic.");
        return null;
      }

      const questions = [];
      const questionDivs = questionsContainer.querySelectorAll("div.border");

      if (questionDivs.length === 0) {
        alert("Please add at least one question.");
        return null;
      }

      for (const qDiv of questionDivs) {
        const questionText = qDiv.querySelector("textarea[name='questionText']").value.trim();
        const questionType = qDiv.querySelector("select[name='questionType']").value;

        if (!questionText) {
          alert("Please fill in all question texts.");
          return null;
        }

        const questionData = {
          text: questionText,
          type: questionType,
        };

        if (questionType === "multiple-choice") {
          const options = [];
          const optionInputs = qDiv.querySelectorAll("input[name='optionText']");
          for (const optInput of optionInputs) {
            const optText = optInput.value.trim();
            if (!optText) {
              alert("Please fill in all option texts.");
              return null;
            }
            options.push(optText);
          }
          if (options.length < 2) {
            alert("Multiple choice questions require at least two options.");
            return null;
          }
          questionData.options = options;
        }

        questions.push(questionData);
      }

      // Get selected students
      const selectedStudentsOptions = Array.from(
        assessmentForm.studentsSelect.selectedOptions
      );
      if (selectedStudentsOptions.length === 0) {
        alert("Please select at least one student to assign.");
        return null;
      }
      const students = selectedStudentsOptions.map((opt) => ({
        id: opt.value,
        name: opt.text,
      }));

      return {
        id: generateId(),
        title,
        topic,
        questions,
        students,
      };
    }

    // Reset form to default state
    function resetForm() {
      assessmentForm.reset();
      questionsContainer.innerHTML = "";
      addQuestion();
      assessmentForm.removeEventListener("submit", updateHandler);
      assessmentForm.addEventListener("submit", submitHandler);
      delete assessmentForm.dataset.editingId;
      assessmentForm.querySelector("button[type=submit]").textContent = "Assign Assessment";
      selectAllCheckbox.checked = false;
    }

    // Delete assessment
    function deleteAssessment(id) {
      if (!confirm("Are you sure you want to delete this assessment?")) return;
      const assignedAssessments =
        JSON.parse(localStorage.getItem("assignedAssessments")) || [];
      const filtered = assignedAssessments.filter((a) => a.id !== id);
      localStorage.setItem("assignedAssessments", JSON.stringify(filtered));
      loadAssignedAssessments();
      alert("Assessment deleted.");
    }

    // Initial setup
    window.addEventListener("DOMContentLoaded", () => {
      addQuestion();
      loadAssignedAssessments();
      assessmentForm.addEventListener("submit", submitHandler);
    });
  </script>
 </body>
</html>