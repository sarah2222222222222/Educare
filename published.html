<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   EDUCARE
  </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
    @keyframes tumble {
      0% {
        transform: rotate(0deg);
      }
      25% {
        transform: rotate(5deg);
      }
      50% {
        transform: rotate(-5deg);
      }
      75% {
        transform: rotate(5deg);
      }
      100% {
        transform: rotate(0deg);
      }
    }
    .tumble {
      animation: tumble 0.6s ease-in-out;
    }
  </style>
 </head>
 <body class="bg-white text-gray-900 min-h-screen flex flex-col relative">
  <header class="flex flex-col sm:flex-row items-center justify-between px-4 sm:px-6 md:px-8 py-3 border-b border-gray-200 w-full z-20">
   <div class="flex items-center space-x-3 mb-3 sm:mb-0">
    <button id="homeIconBtn" aria-label="Home" class="text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400 rounded p-1">
     <i class="fas fa-home fa-lg"></i>
    </button>
    <img alt="EDUCARE logo with colorful star shapes" class="w-10 h-10" height="40" src="../assets/Images/Untitled design (1).png" width="40"/>
    <span class="font-semibold text-lg text-blue-600 whitespace-nowrap">
     EDUCARE
    </span>
   </div>
   <div class="flex items-center space-x-4 w-full sm:w-auto mb-3 sm:mb-0">
    <button aria-label="Shopping cart" id="cartIconBtn" class="text-blue-500 hover:text-gray-600 flex-shrink-0">
     <i class="fas fa-shopping-cart fa-lg"></i>
    </button>
    <div class="relative flex-grow sm:flex-grow-0 w-full sm:w-auto">
     <input class="border border-gray-300 rounded-md px-3 py-1 w-full sm:w-48 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400" placeholder="Search ..." type="search"/>
     <button aria-label="Search" class="absolute right-1 top-1.5 text-gray-400 hover:text-gray-600">
      <i class="fas fa-search"></i>
     </button>
    </div>
   </div>
   <div class="flex items-center space-x-3 relative">
    <label for="profilePicInput" class="cursor-pointer" title="Change profile picture">
     <img alt="User avatar of a man with beard and mustache" class="w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-blue-500 transition" height="40" id="profilePic" src="https://storage.googleapis.com/a1aa/image/ac1c85cb-820b-4e41-a352-c15d1f4ef395.jpg" width="40"/>
    </label>
    <input accept="image/*" class="hidden" id="profilePicInput" type="file"/>
    <div class="text-right leading-tight max-w-[80px] truncate">
     <p class="text-sm font-semibold text-gray-900">
      Sarah
     </p>
     <p class="text-xs text-gray-500">
      Othman
     </p>
    </div>
   </div>
  </header>
  <section class="bg-gray-100 px-4 sm:px-6 md:px-8 py-8 flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0 md:space-x-6 w-full max-w-7xl mx-auto">
   <div class="max-w-md text-gray-700 text-sm leading-relaxed text-center md:text-left">
    <p class="mb-2 font-semibold text-gray-500">
     Start your learning journey for less!
    </p>
    <p class="text-blue-500 font-semibold whitespace-pre-line">
     If you’re new to EDUCARE, we have exciting news: for a limited time, courses are available
     starting at just LE1499.99 for new learners!
     Don’t miss out—start shopping now.
    </p>
   </div>
   <img alt="Illustration of a woman holding a shopping basket pointing at colorful charts and graphs on a wall" class="w-48 sm:w-60 h-32 sm:h-40 object-contain" height="160" src="https://storage.googleapis.com/a1aa/image/ba38b267-820b-47b3-1c4f-55fe28a4623b.jpg" width="240"/>
  </section>
  <main class="px-4 sm:px-6 md:px-8 py-8 max-w-7xl mx-auto flex-grow w-full">
   <h2 class="text-gray-600 font-semibold text-lg mb-1">
    All the skills you need in one place
   </h2>
   <p class="text-sm text-gray-400 mb-8 max-w-xl">
    From critical skills to technical topics, we support your professional development.
   </p>
   <h3 class="font-semibold italic text-gray-900 mb-6">
    Web Developer
   </h3>
   <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    <!-- Card 1 -->
    <article class="border border-gray-200 rounded-lg p-4 flex flex-col space-y-3 hover:shadow-md transition-shadow duration-200 tumble" data-course="1" tabindex="0" role="button" aria-pressed="false" aria-label="View details for Web Development Masterclass - Online Certification Course">
     <img alt="Illustration of a computer screen with code and a rocket representing Web Development Masterclass" class="w-full h-40 object-contain rounded" height="160" src="https://storage.googleapis.com/a1aa/image/a092764c-a67b-420d-c248-879bd1f692c5.jpg" width="240"/>
     <h4 class="text-sm font-semibold text-gray-900 truncate">
      Web Development Masterclass - Online Certification Course
     </h4>
     <p class="text-xs text-gray-500 truncate">
      youcode training
     </p>
     <div class="flex items-center space-x-1 text-yellow-400 rating-stars" data-course="1" role="radiogroup" aria-label="Rate Web Development Masterclass - Online Certification Course">
      <i class="far fa-star cursor-pointer" data-value="1" role="radio" aria-checked="false" tabindex="0"></i>
      <i class="far fa-star cursor-pointer" data-value="2" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="3" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="4" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="5" role="radio" aria-checked="false" tabindex="-1"></i>
     </div>
     <p class="text-xs font-bold text-gray-900 truncate">
      LE 1099.99
     </p>
     <button class="mt-auto bg-blue-600 text-white text-xs font-semibold py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400" data-course="1" type="button" aria-label="Add Web Development Masterclass to cart">
      Add to cart
     </button>
    </article>
    <!-- Card 2 -->
    <article class="border border-gray-200 rounded-lg p-4 flex flex-col space-y-3 hover:shadow-md transition-shadow duration-200 tumble" data-course="2" tabindex="0" role="button" aria-pressed="false" aria-label="View details for The Web Developer Bootcamp 2023">
     <img alt="Illustration of a man sitting at a desk with computer and books representing Web Developer Bootcamp 2023" class="w-full h-40 object-contain rounded" height="160" src="https://storage.googleapis.com/a1aa/image/c9adf41d-8c93-49e6-b30c-1288bc75a515.jpg" width="240"/>
     <h4 class="text-sm font-semibold text-gray-900 truncate">
      The Web Developer Bootcamp 2023
     </h4>
     <p class="text-xs text-gray-500 truncate">
      colt Steele
     </p>
     <div class="flex items-center space-x-1 text-yellow-400 rating-stars" data-course="2" role="radiogroup" aria-label="Rate The Web Developer Bootcamp 2023">
      <i class="far fa-star cursor-pointer" data-value="1" role="radio" aria-checked="false" tabindex="0"></i>
      <i class="far fa-star cursor-pointer" data-value="2" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="3" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="4" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="5" role="radio" aria-checked="false" tabindex="-1"></i>
     </div>
     <p class="text-xs font-bold text-gray-900 truncate">
      LE 999.99
     </p>
     <button class="mt-auto bg-blue-600 text-white text-xs font-semibold py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400" data-course="2" type="button" aria-label="Add The Web Developer Bootcamp 2023 to cart">
      Add to cart
     </button>
    </article>
    <!-- Card 3 -->
    <article class="border border-gray-200 rounded-lg p-4 flex flex-col space-y-3 hover:shadow-md transition-shadow duration-200 tumble" data-course="3" tabindex="0" role="button" aria-pressed="false" aria-label="View details for The Complete Full-Stack Web Development Bootcamp">
     <img alt="Illustration of a man in glasses with code and charts behind representing Full-Stack Web Development Bootcamp" class="w-full h-40 object-contain rounded" height="160" src="https://storage.googleapis.com/a1aa/image/afc7cafd-8de8-4e04-8985-b1ef411b944f.jpg" width="240"/>
     <h4 class="text-sm font-semibold text-gray-900 truncate">
      The Complete Full-Stack Web Development Bootcamp
     </h4>
     <p class="text-xs text-gray-500 truncate">
      colt Steele
     </p>
     <div class="flex items-center space-x-1 text-yellow-400 rating-stars" data-course="3" role="radiogroup" aria-label="Rate The Complete Full-Stack Web Development Bootcamp">
      <i class="far fa-star cursor-pointer" data-value="1" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="2" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="3" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="4" role="radio" aria-checked="false" tabindex="-1"></i>
      <i class="far fa-star cursor-pointer" data-value="5" role="radio" aria-checked="false" tabindex="-1"></i>
     </div>
     <p class="text-xs font-bold text-gray-900 truncate">
      LE 1999.99
     </p>
     <button class="mt-auto bg-blue-600 text-white text-xs font-semibold py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400" data-course="3" type="button" aria-label="Add The Complete Full-Stack Web Development Bootcamp to cart">
      Add to cart
     </button>
    </article>
   </div>
  </main>

  <!-- Modal backdrop -->
  <div aria-hidden="true" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50" id="modalBackdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
   <div class="bg-white rounded-lg max-w-lg w-full p-6 relative shadow-lg mx-4 sm:mx-auto">
    <button aria-label="Close modal" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 focus:outline-none" id="modalCloseBtn" type="button">
     <i class="fas fa-times fa-lg"></i>
    </button>
    <h3 class="text-lg font-semibold mb-2" id="modalTitle">
     Course Title
    </h3>
    <p class="text-gray-700 mb-4" id="modalDesc">
     Course description goes here.
    </p>
    <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 w-full sm:w-auto" id="registerBtn" type="button">
     Register for this course
    </button>
   </div>
  </div>

   <!-- Floating Avatar bottom right -->
   <div class="fixed bottom-4 right-4 floating">
    <a href="./chatbot.html" onclick="openModal()">
     <img alt="AI icon" class="w-20 h-20 rounded-full" src="../assets/Images/WhatsApp Image 2024-11-15 at 19.39.33_b2a01f1c.jpg"/>
    </a>
   </div>

  <!-- AI Companion Modal -->
  <div aria-hidden="true" id="chatbotModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-40" role="dialog" aria-modal="true" aria-labelledby="chatbotTitle" aria-describedby="chatbotDesc">
   <div class="bg-white rounded-lg max-w-md w-full p-6 relative shadow-lg mx-4 sm:mx-auto flex flex-col h-[80vh]">
    <button aria-label="Close AI Companion" id="closeChatbotBtn" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 focus:outline-none">
     <i class="fas fa-times fa-lg"></i>
    </button>
    <h3 class="text-lg font-semibold mb-4" id="chatbotTitle">
     AI Companion
    </h3>
    <div id="chatbotDesc" class="flex-grow border border-gray-300 rounded p-4 overflow-y-auto text-gray-700 text-sm">
     <p>Welcome to your AI learning companion! Ask me anything about your courses or learning journey.</p>
    </div>
    <form id="chatbotForm" class="mt-4 flex space-x-2">
     <input aria-label="Type your message" autocomplete="off" class="flex-grow border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" id="chatInput" placeholder="Type your message..." type="text"/>
     <button aria-label="Send message" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400" type="submit">
      Send
     </button>
    </form>
   </div>
  </div>

  <script>
   const courses = {
      1: {
        title: "Web Development Masterclass - Online Certification Course",
        description: "This comprehensive masterclass covers all essential web development skills, including HTML, CSS, JavaScript, and modern frameworks. Perfect for beginners and those looking to certify their skills.",
        rating: 0
      },
      2: {
        title: "The Web Developer Bootcamp 2023",
        description: "An up-to-date bootcamp that teaches you full-stack web development with hands-on projects, focusing on practical skills and real-world applications.",
        rating: 0
      },
      3: {
        title: "The Complete Full-Stack Web Development Bootcamp",
        description: "Learn front-end and back-end development with this complete bootcamp. Covers databases, server-side programming, and deployment strategies.",
        rating: 0
      }
    };

    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const registerBtn = document.getElementById('registerBtn');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    const profilePicInput = document.getElementById('profilePicInput');
    const profilePic = document.getElementById('profilePic');
    const cartIconBtn = document.getElementById('cartIconBtn');
    const homeIconBtn = document.getElementById('homeIconBtn');

    const chatbotModal = document.getElementById('chatbotModal');
    const openChatbotBtn = document.getElementById('openChatbotBtn');
    const closeChatbotBtn = document.getElementById('closeChatbotBtn');
    const chatbotForm = document.getElementById('chatbotForm');
    const chatInput = document.getElementById('chatInput');
    const chatbotDesc = document.getElementById('chatbotDesc');

    let currentCourseId = null;

    function openModal(courseId) {
      const course = courses[courseId];
      if (!course) return;
      currentCourseId = courseId;
      modalTitle.textContent = course.title;
      modalDesc.textContent = course.description;
      modalBackdrop.classList.remove('hidden');
      modalBackdrop.focus();
    }

    function closeModal() {
      modalBackdrop.classList.add('hidden');
      currentCourseId = null;
    }

    // Attach click handlers to cards (excluding stars and buttons)
    document.querySelectorAll('article[data-course]').forEach(card => {
      card.addEventListener('click', (e) => {
        if (e.target.closest('.rating-stars') || e.target.tagName === 'BUTTON') return;
        openModal(card.getAttribute('data-course'));
      });
      card.addEventListener('keydown', (e) => {
        if ((e.key === 'Enter' || e.key === ' ') && !e.target.closest('.rating-stars') && e.target.tagName !== 'BUTTON') {
          e.preventDefault();
          openModal(card.getAttribute('data-course'));
        }
      });
    });

    modalCloseBtn.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => {
      if (e.target === modalBackdrop) {
        closeModal();
      }
    });

    registerBtn.addEventListener('click', () => {
      if (currentCourseId) {
        window.location.href = `checkout.html?courseId=${currentCourseId}`;
      }
    });

    // Accessibility: close modal on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (!modalBackdrop.classList.contains('hidden')) closeModal();
        if (!chatbotModal.classList.contains('hidden')) closeChatbot();
      }
    });

    // Rating stars logic
    function updateStars(container, rating) {
      const stars = container.querySelectorAll('i');
      stars.forEach(star => {
        const val = parseInt(star.getAttribute('data-value'));
        if (val <= rating) {
          star.classList.remove('far');
          star.classList.add('fas');
          star.setAttribute('aria-checked', 'true');
          star.setAttribute('tabindex', '0');
        } else {
          star.classList.remove('fas');
          star.classList.add('far');
          star.setAttribute('aria-checked', 'false');
          star.setAttribute('tabindex', '-1');
        }
      });
    }

    document.querySelectorAll('.rating-stars').forEach(container => {
      const courseId = container.getAttribute('data-course');
      let currentRating = 0; // start empty
      updateStars(container, currentRating);

      container.addEventListener('click', (e) => {
        if (e.target.tagName === 'I') {
          const selectedRating = parseInt(e.target.getAttribute('data-value'));
          currentRating = selectedRating;
          courses[courseId].rating = selectedRating;
          updateStars(container, selectedRating);
          // Animate card on rating change
          const card = container.closest('article');
          card.classList.remove('tumble');
          void card.offsetWidth; // trigger reflow
          card.classList.add('tumble');
        }
      });

      // Keyboard accessibility for stars
      container.querySelectorAll('i').forEach(star => {
        star.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            const selectedRating = parseInt(star.getAttribute('data-value'));
            currentRating = selectedRating;
            courses[courseId].rating = selectedRating;
            updateStars(container, selectedRating);
            const card = container.closest('article');
            card.classList.remove('tumble');
            void card.offsetWidth;
            card.classList.add('tumble');
          }
          // Arrow keys to navigate stars
          if (e.key === 'ArrowRight' || e.key === 'ArrowUp') {
            e.preventDefault();
            let next = star.nextElementSibling;
            if (next) next.focus();
          }
          if (e.key === 'ArrowLeft' || e.key === 'ArrowDown') {
            e.preventDefault();
            let prev = star.previousElementSibling;
            if (prev) prev.focus();
          }
        });
      });
    });

    // Profile picture change logic
    profilePicInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(event) {
          profilePic.src = event.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // Add to cart button logic
    document.querySelectorAll('button[data-course]').forEach(button => {
      button.addEventListener('click', (e) => {
        e.stopPropagation(); // prevent card click
        const courseId = button.getAttribute('data-course');
        // Navigate to cart page with course id as query param
        window.location.href = `cart.html?addCourseId=${courseId}`;
      });
    });

    // Cart icon click navigates to cart page
    cartIconBtn.addEventListener('click', () => {
      window.location.href = 'cart.html';
    });

    // Home icon click navigates to home page
    homeIconBtn.addEventListener('click', () => {
      window.location.href = 'Home screen.html';
    });

    // AI Companion modal open/close
    function openChatbot() {
      chatbotModal.classList.remove('hidden');
      chatInput.focus();
    }
    function closeChatbot() {
      chatbotModal.classList.add('hidden');
      openChatbotBtn.focus();
    }

    openChatbotBtn.addEventListener('click', openChatbot);
    closeChatbotBtn.addEventListener('click', closeChatbot);
    chatbotModal.addEventListener('click', (e) => {
      if (e.target === chatbotModal) {
        closeChatbot();
      }
    });

    // Simple chatbot form handler (mock)
    chatbotForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const userInput = chatInput.value.trim();
      if (!userInput) return;
      const userMsg = document.createElement('p');
      userMsg.className = "mb-2 text-right text-blue-600";
      userMsg.textContent = `You: ${userInput}`;
      chatbotDesc.appendChild(userMsg);

      // Mock AI response
      const aiMsg = document.createElement('p');
      aiMsg.className = "mb-2 text-left text-gray-700 italic";
      aiMsg.textContent = "AI Companion: Sorry, I am still learning and cannot answer that yet.";
      chatbotDesc.appendChild(aiMsg);

      chatbotDesc.scrollTop = chatbotDesc.scrollHeight;
      chatInput.value = "";
      chatInput.focus();
    });
  </script>
 </body>
</html>